---
import Cart from "./Cart.astro";
import Swiper from "@/components/subcomponents/Swiper.astro";
import QuantityButton from '@/components/subcomponents/QuantityButton.astro'
import QuantityButtonPage from "./subcomponents/QuantityButtonPage.astro";
import type { Root } from '@/api//types';

interface Props {
    product: Root;
}

const { product }: Props = Astro.props;
const { id, title, price, description, category, image, rating } = product;
const { rate, count } = rating;
const imagesarray: string[] = [image,image]; /*solo para hacer la simulacion que tengo un array*/ 
---
<article class="content_pageproduct">
    <figure class="gallery_pageproduct">
        <Swiper images={imagesarray}/>
    </figure>
    <section class="info_pageproduct">
        <header class="name_pageproduct">
            {title}
        </header>
        <h2>Numero de Articulo:<p id="id_to_cart">{id}</p> </h2>
        <div class="info_product">
            {description}
        </div>
        <footer class="footer_pageproduct">
            <p>Tama√±os:</p>

            <div class="clothing_size">
                
                <label class="size">
                  <input type="radio" name="size" checked="">
                  <span class="name">XL</span>
                </label>
                <label class="size">
                  <input type="radio" name="size">
                  <span class="name">M</span>
                </label>
                    
                <label class="size">
                  <input type="radio" name="size">
                  <span class="name">L</span>
                </label>
            </div>
            <QuantityButtonPage/>
            <button class="button_to_cart" id="add_to_cart">ADD TO CART</button>
            
        </footer>  
    </section>
</article>

<style>
    

    .content_pageproduct{
        display: flex;
        flex-direction: row;
        width: 100%;
        align-items: flex-start;
        justify-content: space-around;
        background-color: rgb(255, 255, 255);
    }
    .gallery_pageproduct{
        top:0;
        display: flex;
        position: sticky;/* cambiar en modo cell*/
        width: 45%;
        aspect-ratio: 1/1;
        flex-shrink: 0;
    }
    .info_pageproduct{
        background-color: #f2f2f2;
        border-radius: 10px;
        box-shadow: 10px 10px 5px rgba(0, 0, 0, 0.2);
        padding:20px;
        display: flex;
        flex-direction: column;
        justify-content: space-evenly;
        align-items: flex-start;
        width: 45%;
        gap:20px;
    }
    .info_pageproduct h2{
        color:#000000b5
    }

    .name_pageproduct {
        display: flex;
        flex-wrap: wrap;
        align-items: center;
        justify-content: left;
        font-family: "ProductSans-Regular";
        font-weight: 700;
        font-size: 30px;
        width: 100%;
        
    }

    .info_product{
        display: flex;
        flex-wrap: wrap;
        align-items: center;
        justify-content: left;
        font-family: "ProductSans-bold";
        font-weight: 200;
        font-size: 20px;

    }
    .footer_pageproduct {
       
        display: flex;
        flex-wrap: wrap;
        flex-direction: column;
        justify-content: center;
        align-items: flex-start;
        width: 100%;
        gap:20px;
    }
    .number-control-page{
        
        align-self: flex-start;
    }
    .button_list {
        display: flex;
        flex-wrap: wrap;
        flex-direction: row;
        justify-content: start;
        align-items: start;
        width: 100%;
    }
    .button_container {
        display: flex;
        justify-content: flex-start;
        align-items: center;
        height: 50px;
        width: 100px;
    }
    .button_color {
        right: 0;
        height: 100%;
        aspect-ratio: 1/1;
    }
    .image_color {
        width: 100%;
        height: 100%;
        border-radius: 50%;
    }

    .clothing_size{
        gap:50px;
        display: flex;
        flex-wrap: wrap;
        flex-direction: row;
        justify-content: start;
        align-items: center;
        width: 100%;
    }

    .footer_pageproduct p{
        text-align: center;
        font-size: 20px;
        font-family: "ProductSans-Light";
        font-weight: 1000;
        margin-right: 50px;
    }
    .size input{
        display: none;
    }

    .size{
        height: 50px;
        width: 50px;
        
        
    }
    .size .name{
        height: 100%;
        border: solid 1px ;
        aspect-ratio: 1/1;
        display: flex;
        cursor: pointer;
        align-items: center;
        justify-content: center;
        border-radius: 0.5rem;
        color: rgba(51, 65, 85, 1);
        transition: all .15s ease-in-out;
    }

    .size input:checked + .name{
        background-color: #828282;
        font-weight: 600;
    }
    
    .button_to_cart {
        width: fit-content;
        min-width: 100px;
        
        padding: 15px 50px;
        border-radius: 5px;
        border: 2.5px solid #E0E1E4;
        box-shadow: 0px 0px 20px -20px;
        cursor: pointer;
        background-color: white;
        transition: all 0.2s ease-in-out 0ms;
        user-select: none;
        font-family: 'Poppins', sans-serif;
        font-weight: 700;
    }


    .button_to_cart:hover {
        color:#ffffff;
        background-color: #000000;
        box-shadow: 0px 0px 20px -18px;
    }

    .button_to_cart:active {
    transform: scale(0.95);
    }
    
    @media (max-width: 748px) {

        .content_pageproduct{
            display: flex;
            flex-direction: column;
            width: 100%;
            align-items: flex-start;
            justify-content: space-around;
            gap:20px
            
        }

        .gallery_pageproduct{
            display: flex;
            position: static;/* cambiar en modo cell*/
            width: 100%;
        }

        .info_pageproduct{
            width: 100%;
        }
    }
</style>

<script src="../utils/carts.ts"></script>